<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
<!--	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
	<script src="/abcjs_basic_5.6.8-min.js" type="text/javascript"></script>
	<script src="/index.js" type="text/javascript"></script>
	<script>
		function generate() {
			var key = document.getElementById("Key").value;
			console.log(key);

			var xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function() {
	    		if (this.readyState == 4 && this.status == 200) {
	       // Typical action to be performed when the document is ready:
				 var abc =
				 ABCJS.renderAbc("paper", abc);
				 console.log(abc);
				 // ABCJS.renderMidi("midi", abc);

		     // ABCJS.renderMidi("midi-download", abc, { generateDownload: true, generateInline: false });
	    	}
		};
		xhttp.open("GET", "http://localhost:3000/mymusic", true);
		xhttp.send();
		}
		function submitForm () {
			console.log("Submit form");
			var key = document.getElementById("Key").value;
			var command = "generate.py --key " + key;
			app.get('/python',(req, res) => {RunPython(command, res);})
		}
	</script>
</head>
<body>

<div id="paper"></div>
<div id="midi"></div>
<div id="midi-download"></div>
<form id="keyForm">
	<label> Please select key <label>
		<select form="keyForm" id="Key">
		  <option value="amaj">A Major</option>
		  <option value="amin">A minor</option>
		  <option value="dmaj">D Major</option>

		</select>
		<button onclick="submitForm" type="button">Submit</button>
<form>
</body>
</html>
